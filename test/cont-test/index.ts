//----------------------------------------------------------------------------------------------------------
import {ConfigObject, ConfigLoader} from "../../src/index";
//----------------------------------------------------------------------------------------------------------


//----------------------------------------------------------------------------------------------------------
export class ServerConfig extends ConfigLoader
//----------------------------------------------------------------------------------------------------------
{
    // overridden
    //------------------------------------------------------------------------------------------------------
    configDir():string
    //------------------------------------------------------------------------------------------------------
    {
        let dir =  __dirname, loadJson = process.env['json'];

        if ( parseInt(loadJson) === 1 ) {
            dir = dir.replace('dist/', '');
        }

        return dir;
    }


    // overridden
    //------------------------------------------------------------------------------------------------------
    static getInstance(): ServerConfig
    //------------------------------------------------------------------------------------------------------
    {
        return <ServerConfig>super.getInstance();
    }


    //------------------------------------------------------------------------------------------------------
    get databaseConfig(): ConfigObject
    //------------------------------------------------------------------------------------------------------
    {
        return this.configForName('database');
    }


    //------------------------------------------------------------------------------------------------------
    get something(): ConfigObject
    //------------------------------------------------------------------------------------------------------
    {
        return this.configForName('something');
    }
}


//----------------------------------------------------------------------------------------------------------
export const GlobalConfig:ServerConfig = ServerConfig.getInstance();
//----------------------------------------------------------------------------------------------------------